---
// src/components/Scaling.astro
import '../styles/global.css';
---

<section
  id="why-choose-us"
  class="relative bg-gray-50 overflow-hidden pt-16 sm:pt-20 lg:pt-30 pb-16 sm:pb-20 lg:pb-34"
>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 w-full">
    <!-- 4 textos de esquina - responsivos -->
    <!-- Esquinas responsivas: banda arriba y abajo en móvil, esquinas en desktop -->
    <!-- Banda inferior móvil: las 4 oraciones en dos filas -->
    <div class="flex flex-col gap-1 mt-6 sm:hidden">
      <div class="flex justify-between items-center gap-2 px-2">
        <span class="corner-item font-montserrat text-black text-xs select-none">R&D Lab, In-House</span>
        <span class="corner-item font-montserrat text-black text-xs select-none">Scalable Production</span>
      </div>
      <div class="flex justify-between items-center gap-2 px-2">
        <span class="corner-item font-montserrat text-black text-xs select-none">Full Regulatory Compliance</span>
        <span class="corner-item font-montserrat text-black text-xs select-none">Full Regulatory Compliance</span>
      </div>
    </div>
    <!-- Esquinas absolutas en sm+ -->
    <div class="hidden sm:block">
      <div class="corner-item absolute top-8 left-4 sm:top-12 sm:left-8 lg:top-30 lg:left-1/4 font-montserrat text-black text-base md:text-lg lg:text-xl select-none">
        R&D Lab, In-House
      </div>
      <div class="corner-item absolute top-8 right-4 sm:top-12 sm:right-8 lg:top-30 lg:right-1/4 font-montserrat text-black text-base md:text-lg lg:text-xl select-none">
        Scalable Production
      </div>
      <div class="corner-item absolute bottom-8 left-4 sm:bottom-12 sm:left-8 lg:bottom-30 lg:left-1/4 font-montserrat text-black text-base md:text-lg lg:text-xl select-none">
        Full Regulatory Compliance
      </div>
      <div class="corner-item absolute bottom-8 right-4 sm:bottom-12 sm:right-8 lg:bottom-30 lg:right-1/4 font-montserrat text-black text-base md:text-lg lg:text-xl select-none">
        Full Regulatory Compliance
      </div>
    </div>

    <!-- Bloque central -->
    <div class="max-w-4xl mx-auto text-center py-16 sm:py-20 lg:py-30 px-4 sm:px-6">
      <!-- Primera línea: Antonio Bold, responsivo -->
      <h2
        class="scaling-title text-[#464b68] text-4xl sm:text-5xl md:text-6xl lg:text-7xl xl:text-8xl 2xl:text-[8.5rem] mb-2 pb-0 leading-none tracking-tight tracking-tighter"
        style="font-family: 'Antonio', sans-serif; font-weight: 300;"
      >
        BUILT TO SCALE
      </h2>

      <!-- Segunda línea: Antonio ExtraLight, responsivo -->
      <h3
        class="scaling-subtitle text-[#015c9f] text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl 2xl:text-[4.97rem] tracking-[0.02em] mt-[-0.5rem] mb-6 leading-none"
        style="font-family: 'Antonio', sans-serif; font-weight: 300;"
      >
        BACKED BY SCIENCE
      </h3>

      <!-- Texto descriptivo: Montserrat, responsivo -->
      <div class="scaling-text font-montserrat text-sm sm:text-base md:text-lg lg:text-xl text-black max-w-3xl mx-auto">
        <p class="font-bold text-black leading-none mb-1">
          Formulation, Volume, Compliance
        </p>
        <p class="text-black leading-none mt-0 ">
          Our turnkey model simplifies your path from concept to shelf,<br class="hidden sm:block">
          delivering speed, quality, and sustainability at every stage.
        </p>
      </div>
    </div>
  </div>
</section>

<script>
  import { gsap } from 'gsap';
  import { ScrollTrigger } from 'gsap/ScrollTrigger';
  gsap.registerPlugin(ScrollTrigger);

  document.addEventListener('DOMContentLoaded', () => {
    const tl = gsap.timeline({
      scrollTrigger: {
        trigger: '#why-choose-us',
        start: 'top 80%',
        end: 'bottom 20%',
        // al entrar y al volver atrás, repite la animación
        toggleActions: 'play none play none',
      }
    });

    // 1) Esquinas
    tl.from('.corner-item', {
      y: 20,
      opacity: 0,
      duration: 0.6,
      stagger: 0.2,
      ease: 'power2.out'
    })
    // 2) Título principal
    .from('.scaling-title', {
      y: 50,
      opacity: 0,
      duration: 0.8,
      ease: 'power2.out'
    }, '-=0.4')
    // 3) Subtítulo
    .from('.scaling-subtitle', {
      y: 30,
      opacity: 0,
      duration: 0.6,
      ease: 'power2.out'
    }, '-=0.5')
    // 4) Texto descriptivo
    .from('.scaling-text', {
      y: 20,
      opacity: 0,
      duration: 0.6,
      ease: 'power2.out'
    }, '-=0.4');

    // Animaciones de hover para elementos de esquina
    document.querySelectorAll('.corner-item').forEach(item => {
      item.addEventListener('mouseenter', () => {
        gsap.to(item, {
          duration: 0.3,
          scale: 1.1,
          ease: 'power2.out'
        });
      });

      item.addEventListener('mouseleave', () => {
        gsap.to(item, {
          duration: 0.3,
          scale: 1,
          ease: 'power2.out'
        });
      });
    });
  });
</script>
